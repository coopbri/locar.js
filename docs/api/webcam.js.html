<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: webcam.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: webcam.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import * as THREE from "three";
import EventEmitter from './event-emitter.js';

/** Class to setup the webcam. */
class Webcam extends EventEmitter {
 #video;

  /**
   * Create a Webcam.
   * @param constraints {Object} - options to use for initialising the camera. 
   * This is the same constraints object as used by standard MediaDevices API.
   * @param {string} videoElementSelector - selector to obtain the HTML video 
   * element to render the webcam feed. If a falsy value (e.g. null or 
   * undefined), a video element will be created.
   */


 constructor(constraints={video:{facingMode: 'environment'}}, videoElementSelector) {
    super();
    this.sceneWebcam = new THREE.Scene();
    if (!videoElementSelector) {
      this.#video = document.createElement("video");
      this.#video.setAttribute("autoplay", true);
      this.#video.setAttribute("playsinline", true);
      this.#video.style.display = "none";
      document.body.appendChild(this.#video);
    } else {
      this.#video = document.querySelector(videoElementSelector);
    }
    this.texture = new THREE.VideoTexture(this.#video);
    if (navigator.mediaDevices &amp;&amp; navigator.mediaDevices.getUserMedia) {
      navigator.mediaDevices.getUserMedia(constraints).then ( stream => {
        this.#video.addEventListener('loadedmetadata', () => {
          this.#video.setAttribute('width', this.#video.videoWidth);
          this.#video.setAttribute('height', this.#video.videoHeight);
          this.#video.play();
          /**
           * Webcam started event. 
           * @event Webcam#webcamstarted
           * @param {Object} event object containing 'texture' - the texture the webcam will stream to.
           */
          this.emit("webcamstarted", { texture: this.texture });
        });
        this.#video.srcObject = stream;
      })
      .catch(e => {
       /**
        * Webcam error event. 
        * @event Webcam#webcamerror
        * @param {Object} event object with 'code' and 'message' fields. 
        */
        this.emit("webcamerror", {
            code: e.name, 
            message: e.message
        });
      })
    } else {
      this.emit("webcamerror", {
        code: "LOCAR_NO_MEDIA_DEVICES_API",
        message: "Media devices API not supported"
      });
    }
  }

  /**
   * Free up the memory associated with the webcam.
   * Should be called when your application closes.
   */
  dispose() {
    this.texture.dispose();
  }
}

export default Webcam;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ClickHandler.html">ClickHandler</a></li><li><a href="DeviceOrientationControls.html">DeviceOrientationControls</a></li><li><a href="EventEmitter.html">EventEmitter</a></li><li><a href="LocationBased.html">LocationBased</a></li><li><a href="SphMercProjection.html">SphMercProjection</a></li><li><a href="Webcam.html">Webcam</a></li></ul><h3>Events</h3><ul><li><a href="DeviceOrientationControls.html#event:deviceorientationerror">deviceorientationerror</a></li><li><a href="DeviceOrientationControls.html#event:deviceorientationgranted">deviceorientationgranted</a></li><li><a href="LocationBased.html#event:gpserror">gpserror</a></li><li><a href="LocationBased.html#event:gpsupdate">gpsupdate</a></li><li><a href="Webcam.html#event:webcamerror">webcamerror</a></li><li><a href="Webcam.html#event:webcamstarted">webcamstarted</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Mon Aug 25 2025 14:24:26 GMT+0100 (British Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
